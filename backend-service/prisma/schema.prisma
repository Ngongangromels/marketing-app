generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id Int  @id @default(autoincrement())
  email String @unique
  name String
  password String
  solde Float
  role Role  @default(FINALCUSTOMER)
  senderId String @db.VarChar(11)
  createAt DateTime @default(now())
  contact Contact[]
  smsCampaign SmsCampaign[]
  api Api[]
  invoicing Invoicing @relation(fields: [invoicingId], references: [id])
  invoicingId Int
  operateur Tarif[]
}


model Contact {
  id Int @id @default(autoincrement())
  nameContact String
  numberContact Int
  creatAt DateTime @default(now())
  user User @relation(fields: [userId], references: [id])
  userId Int
}

model SmsCampaign {
  id Int @id @default(autoincrement())
  nameCampaign String
  content String
  typeCampaign TypeCampaign @default(SMS)
   clickRate Int
   sendSms Int
   smsRead Int
   createAt DateTime @default(now())
  dataCampaign DateTime
  user User @relation(fields: [userId], references: [id])
  userId Int
  operateur Operateur @relation(fields: [operateurId], references: [id])
  operateurId Int
  invoicing Invoicing @relation(fields: [invoicingId], references: [id])
  invoicingId Int
}


model Operateur {
  id Int @id @default(autoincrement())
  prefixe String 
  operatorName String
  pays String
  creatAt DateTime @default(now())
  smsCampaign SmsCampaign[]
  users Tarif[]
}

model Tarif {
  user User @relation(fields: [userId], references: [id])
  userId Int
  operateur Operateur @relation(fields: [operateurId], references: [id])
  operateurId Int
  assigneAt DateTime @default(now())
  assignedBy String


  @@id([userId, operateurId])
}

model Invoicing {
  id Int @id @default(autoincrement())
  modeI ModeInvoicing @default(VOLUME)
  user User[]
  smsCompaign SmsCampaign[]
}

model Transaction {
  id Int @id @default(autoincrement())
  cost Float
  sentStatus Boolean
}

model Api {
  id Int @id @default(autoincrement())
  baseUrl String
  typeApi TypeApi @default(GET)
  format Format @default(JSON)
  apiParameter String[]
  createAt DateTime @default(now())
  user User @relation(fields: [userId], references: [id])
  userId Int
}

enum TypeApi {
  GET
  POST
}

enum Format {
  JSON 
  RESTFULL
}

enum ModeInvoicing {
  VOLUME
  CURRENCY
}

enum TypeCampaign {
  SMS
  SMSENRICHI
}

enum Role {
  FINALCUSTOMER
  SUPERADMIN
  RETAILER
  
}



